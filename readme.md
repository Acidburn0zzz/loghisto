Copied out of my work for the CockroachDB metrics system.  Based on an algorithm created by Keith Frost.
